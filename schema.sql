--
-- Script was generated by Devart dbForge Studio 2020 for MySQL, Version 9.0.890.0
-- Product home page: http://www.devart.com/dbforge/mysql/studio
-- Script date 24.05.2022 23:18:47
-- Server version: 8.0.19
-- Client version: 4.1
--

-- 
-- Disable foreign keys
-- 
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;

-- 
-- Set SQL mode
-- 
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;

-- 
-- Set character set the client will use to send SQL statements to the server
--
SET NAMES 'utf8';

--
-- Set default database
--
USE readme;

--
-- Drop table `comments`
--
DROP TABLE IF EXISTS comments;

--
-- Drop table `content_type`
--
DROP TABLE IF EXISTS content_type;

--
-- Drop table `likes`
--
DROP TABLE IF EXISTS likes;

--
-- Drop table `messages`
--
DROP TABLE IF EXISTS messages;

--
-- Drop table `posts`
--
DROP TABLE IF EXISTS posts;

--
-- Drop table `posts_tags`
--
DROP TABLE IF EXISTS posts_tags;

--
-- Drop table `subs`
--
DROP TABLE IF EXISTS subs;

--
-- Drop table `tags`
--
DROP TABLE IF EXISTS tags;

--
-- Drop table `users`
--
DROP TABLE IF EXISTS users;

--
-- Set default database
--
USE readme;

--
-- Create table `users`
--
CREATE TABLE users (
  id int NOT NULL AUTO_INCREMENT,
  dt_add timestamp NULL DEFAULT CURRENT_TIMESTAMP,
  email varchar(128) NOT NULL,
  login char(64) NOT NULL,
  password char(64) NOT NULL,
  ava_link varchar(256) DEFAULT NULL,
  PRIMARY KEY (id)
)
ENGINE = INNODB,
AUTO_INCREMENT = 4,
AVG_ROW_LENGTH = 5461,
CHARACTER SET utf8,
COLLATE utf8_general_ci;

--
-- Create index `email` on table `users`
--
ALTER TABLE users
ADD UNIQUE INDEX email (email);

--
-- Create index `login` on table `users`
--
ALTER TABLE users
ADD UNIQUE INDEX login (login);

--
-- Create index `u_author` on table `users`
--
ALTER TABLE users

--
-- Create table `tags`
--
CREATE TABLE tags (
  id int NOT NULL AUTO_INCREMENT,
  name varchar(128) DEFAULT NULL,
  PRIMARY KEY (id)
)
ENGINE = INNODB,
CHARACTER SET utf8,
COLLATE utf8_general_ci;

--
-- Create table `subs`
--
CREATE TABLE subs (
  id int NOT NULL AUTO_INCREMENT,
  user_id int NOT NULL,
  user_sub_id int NOT NULL,
  PRIMARY KEY (id)
)
ENGINE = INNODB,
AUTO_INCREMENT = 2,
AVG_ROW_LENGTH = 16384,
CHARACTER SET utf8,
COLLATE utf8_general_ci;

--
-- Create table `posts_tags`
--
CREATE TABLE posts_tags (
  id int NOT NULL AUTO_INCREMENT,
  post_id int DEFAULT NULL,
  tag_id int DEFAULT NULL,
  PRIMARY KEY (id)
)
ENGINE = INNODB,
CHARACTER SET utf8,
COLLATE utf8_general_ci;

--
-- Create table `posts`
--
CREATE TABLE posts (
  id int NOT NULL AUTO_INCREMENT,
  dt_add timestamp NULL DEFAULT CURRENT_TIMESTAMP,
  title varchar(256) NOT NULL,
  content text NOT NULL,
  author varchar(256) NOT NULL,
  avatar varchar(128) DEFAULT NULL,
  img_link varchar(256) DEFAULT NULL,
  video_link varchar(256) DEFAULT NULL,
  link varchar(256) DEFAULT NULL,
  view_count int DEFAULT NULL,
  user_id int DEFAULT NULL,
  content_type_id int DEFAULT NULL,
  PRIMARY KEY (id)
)
ENGINE = INNODB,
AUTO_INCREMENT = 6,
AVG_ROW_LENGTH = 3276,
CHARACTER SET utf8,
COLLATE utf8_general_ci;

--
-- Create index `p_author` on table `posts`
--
ALTER TABLE posts
ADD INDEX p_author (author);

--
-- Create table `messages`
--
CREATE TABLE messages (
  id int NOT NULL AUTO_INCREMENT,
  dt_add timestamp NULL DEFAULT CURRENT_TIMESTAMP,
  content varchar(256) NOT NULL,
  user_send_id int NOT NULL,
  user_get_id int NOT NULL,
  PRIMARY KEY (id)
)
ENGINE = INNODB,
CHARACTER SET utf8,
COLLATE utf8_general_ci;

--
-- Create table `likes`
--
CREATE TABLE likes (
  id int NOT NULL AUTO_INCREMENT,
  user_id int NOT NULL,
  post_id int NOT NULL,
  PRIMARY KEY (id)
)
ENGINE = INNODB,
AUTO_INCREMENT = 2,
AVG_ROW_LENGTH = 16384,
CHARACTER SET utf8,
COLLATE utf8_general_ci;

--
-- Create table `content_type`
--
CREATE TABLE content_type (
  id int NOT NULL AUTO_INCREMENT,
  content_type varchar(64) DEFAULT NULL,
  PRIMARY KEY (id)
)
ENGINE = INNODB,
AUTO_INCREMENT = 7,
AVG_ROW_LENGTH = 2730,
CHARACTER SET utf8,
COLLATE utf8_general_ci;

--
-- Create table `comments`
--
CREATE TABLE comments (
  id int NOT NULL AUTO_INCREMENT,
  dt_add timestamp NULL DEFAULT CURRENT_TIMESTAMP,
  content varchar(256) NOT NULL,
  user_id int NOT NULL,
  post_id int NOT NULL,
  PRIMARY KEY (id)
)
ENGINE = INNODB,
AUTO_INCREMENT = 3,
AVG_ROW_LENGTH = 8192,
CHARACTER SET utf8,
COLLATE utf8_general_ci;

--
-- Create index `c_text` on table `comments`
--
ALTER TABLE comments
ADD INDEX c_text (content);

-- 
-- Dumping data for table users
--
INSERT INTO users VALUES
(1, '2022-05-23 12:04:14', 'aaa@aa.aa', 'larisa', '123', 'img/ava1.jpg'),
(2, '2022-05-23 12:04:14', 'bbb@bb.bb', 'vladik', '123', 'img/ava2.jpg'),
(3, '2022-05-23 12:04:14', 'ccc@cc.cc', 'viktor', '123', 'img/ava3.jpg');

-- 
-- Dumping data for table tags
--
-- Table readme.tags does not contain any data (it is empty)

-- 
-- Dumping data for table subs
--
INSERT INTO subs VALUES
(1, 1, 2);

-- 
-- Dumping data for table posts_tags
--
-- Table readme.posts_tags does not contain any data (it is empty)

-- 
-- Dumping data for table posts
--
INSERT INTO posts VALUES
(1, '2022-05-23 12:04:14', 'Цитата', 'Мы в жизни любим только раз, а после ищем лишь похожих', 'Лариса', 'userpic-larisa-small.jpg', NULL, NULL, NULL, 7, 1, 5),
(2, '2022-05-23 12:04:14', 'Игра престолов', 'Не могу дождаться начала финального сезона своего любимого сериала!', NULL, 'userpic.jpg', NULL, NULL, NULL, 5, 2, 2),
(3, '2022-05-23 12:04:14', 'Наконец, обработал фотки!', 'rock-medium.jpg', NULL, 'userpic-mark.jpg', NULL, NULL, NULL, 8, 3, 3),
(4, '2022-05-23 12:04:14', 'Моя мечта', 'coast-medium.jpg', NULL, 'userpic-larisa-small.jpg', NULL, NULL, NULL, 3, 1, 3),
(5, '2022-05-23 12:04:14', 'Лучшие курсы', 'www.htmlacademy.ru', NULL, 'userpic.jpg', NULL, NULL, NULL, 1, 2, 4);

-- 
-- Dumping data for table messages
--
-- Table readme.messages does not contain any data (it is empty)

-- 
-- Dumping data for table likes
--
INSERT INTO likes VALUES
(1, 1, 1);

-- 
-- Dumping data for table content_type
--
INSERT INTO content_type VALUES
(1, 'all'),
(2, 'post-text'),
(3, 'post-photo'),
(4, 'post-link'),
(5, 'post-quote'),
(6, 'post-video');

-- 
-- Dumping data for table comments
--
INSERT INTO comments VALUES
(1, '2022-05-23 12:04:14', 'Вау, круто!', 1, 1),
(2, '2022-05-23 12:04:14', 'А что так можно было?', 2, 2);

-- 
-- Restore previous SQL mode
-- 
/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;

-- 
-- Enable foreign keys
-- 
/*!40014 SET FOREIGN_KEY_CHECKS = @OLD_FOREIGN_KEY_CHECKS */;